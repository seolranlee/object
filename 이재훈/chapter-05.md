### # Chapter 05 책임 할당하기

- `책임 할당 설계`를 실천할 때 `어려움`
  - 어떤 객체에 어떤 책임을 할당할지 `난해함`
  - 하나의 `트레이드 오프` 과정
  - `상황과 문맥에 따라` 최선이 달라짐

#### # 01 책임 주도 설계를 향해

- 앞에서 했던말 또 함
  - 문맥, 메시지를 먼저 그려라

#### # 02 책임 할당을 위한 GRASP 패턴

- `도메인 흐름을 먼저 정리`해라

  - 완벽할 필요는 없음

- \*\* `올바른 메시지`를 결정하는 방법

  - 메시지를 수신할 객체가 아니라, `송신할 객체 입장`에서 작성해야함

- `올바른 정보 전문가`를 결정하는 방법

  - 당연히 해당 정보에 대해 제일 잘 알고 있는 객체를 골라야 하지만,
  - \*\* 해당 객체가 `데이터를 반드시 저장하고 있을 필요는 없다.`

- \*\* `객체 생성 책임 할당`하기
  - 객체 A를 생성해야할 때, 어떤 객체에게 그 책임을 줘야할까?
    - 객체 A를 `포함하거나 참조`한다
    - 객체 A를 `기록`한다
    - 객체 A를 `긴밀하게 사용`한다
    - 객체 A를 `초기화하는데 필요한 정보`를 가지고 있다
  - 그냥 가장 많이 연관된 객체를 선택하라는 말인 듯
    - `이미 많이 결합되어 있는` 객체

#### # 03 구현을 통한 검증

- \*\* 메시지를 정할때는, 수신받는 객체에 대한 어떤 정보도 관심을 갖지 않아야 한다.

- 설계를 개선하는 작업

  - \*\* `변경의 이유가 하나 이상인 클래스`를 먼저 찾자
  - 추가적인 두가지 패턴
    - `인스턴스 변수가 초기화되는 시점`을 보자
      - `생성자에서 초기화`면 응집도가 높아짐
    - `메서드들이 인스턴스 변수를 사용하는 방식`을 보자
      - 모든 메서드가 `객체의 모든 속성을 사용`하는지

- \*\* 다형성 패턴

  - 큰 내용은 없고, `동일한 개념`이지만 `내용이 다른 로직(if 분기)`을, 별도의 하위 클래스로 만들고
    - 역할이라는 개념을 만들어, `역할에 책임을 할당`하게 함
  - \*\* 이 경우, `상위 클래스도 동일한 문제가 발생`할 수 있는데, 하위 클래스에서와 `동일한 방법으로 다형성 패턴을 적용`하면 된다.

- `상속` vs `합성`
  - 위 다형성 패턴을 적용하는 과정에서, `상속이 너무 유연하지 못하다는 판단`이 든다면, `합성을 사용`할 것

#### # 04 책임 주소 설계의 대안

- 책임 주도 설계는 초기에 완벽하기는 힘들다.

  - `우선 구현` 후 `리팩토링`을 할 것을 권장

- `메서드`의 `내부 로직이 길면` 절대 좋지 않다
  - 이유는 많음
  - 차라리 잘게 쪼개서 `클래스의 길이`가 길어지는 것이 좋음
